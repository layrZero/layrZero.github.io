"use strict";(self.webpackChunkscaffold=self.webpackChunkscaffold||[]).push([[3200],{7575:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"trading-platform/amibroker/options-button-trading-module","title":"Options Button Trading Module","description":"This AFL script is an advanced interactive trading tool designed for AmiBroker, specifically to facilitate manual execution of options trades via a graphical interface connected to the OpenAlgo bridge API. It calculates key strike prices (ATM, ITM, OTM) for Call (CE) and Put (PE) options based on parameters such as the underlying spot, expiry, strike intervals, and offsets relative to the spot price (which can be based on previous open, close, or today\u2019s open). It constructs standard option symbols for execution and visually displays the Algo status on the chart. The script also maintains static variables to track open trades and ensures strike recalculations align with user-selected inputs.","source":"@site/docs/trading-platform/amibroker/options-button-trading-module.md","sourceDirName":"trading-platform/amibroker","slug":"/trading-platform/amibroker/options-button-trading-module","permalink":"/docs/trading-platform/amibroker/options-button-trading-module","draft":false,"unlisted":false,"editUrl":"https://github.com/layrZero/layrZero.github.io/tree/main/docs/trading-platform/amibroker/options-button-trading-module.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Line Trading Module","permalink":"/docs/trading-platform/amibroker/line-trading-module"},"next":{"title":"SmartOrder Chart Module","permalink":"/docs/trading-platform/amibroker/smartorder-chart-module"}}');var a=n(4848),r=n(8453);const i={},s="Options Button Trading Module",l={},c=[];function T(t){const e={code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,r.R)(),...t.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"options-button-trading-module",children:"Options Button Trading Module"})}),"\n",(0,a.jsx)(e.p,{children:"This AFL script is an advanced interactive trading tool designed for AmiBroker, specifically to facilitate manual execution of options trades via a graphical interface connected to the OpenAlgo bridge API. It calculates key strike prices (ATM, ITM, OTM) for Call (CE) and Put (PE) options based on parameters such as the underlying spot, expiry, strike intervals, and offsets relative to the spot price (which can be based on previous open, close, or today\u2019s open). It constructs standard option symbols for execution and visually displays the Algo status on the chart. The script also maintains static variables to track open trades and ensures strike recalculations align with user-selected inputs."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-clike",children:'//Rajandran R - Creator of OpenAlgo\n//website - openalgo.in / marketcalls.in\n//OpenAlgo - Amibroker Options Button Trading Module v1.0\n//Date - 20/08/2024\n\n\n\n_SECTION_BEGIN("OpenAlgo Options Button Trading");\n\nRequestTimedRefresh(1,False);\n\nEnableTextOutput(False);\n\nSetOption("StaticVarAutoSave", 30 );\n\n\napikey = ParamStr("OpenAlgo API Key", "******");\n\nstrategy = ParamStr("Strategy Name", "Test Strategy");\n\nspot = Paramlist("Spot Symbol","NIFTY|BANKNIFTY|FINNIFTY|SENSEX|CRUDEOILM");  //OpenAlgo Underlying Symbol - used for Formulation of OpenAlgo Option Symbols\nexpiry = ParamStr("Expiry Date","17JUL25");\n\nexchange = ParamList("Exchange","NFO|BFO|MCX",0); \nSymbol = ParamStr("Underlying Symbol(Data Vendor Symbol)","NIFTY"); // Amibroker Symbol - Data Vendors Symbol\niInterval= Param("Strike Interval",50,1,10000,1);\nStrikeCalculation = Paramlist("Strike Calculation","PREVOPEN|PREVCLOSE|TODAYSOPEN",0);\nLotSize = Param("Lot Size",75,1,10000,1);\n\nATMoffsetCE = Param("ATM CE Offset",0,-40,40,1);\nITMoffsetCE = Param("ITM CE Offset",-2,-40,-1,1);\nOTMoffsetCE = Param("OTM CE Offset",4,1,40,1);\n\nATMoffsetPE = Param("ATM PE Offset",0,-40,40,1);\nITMoffsetPE = Param("ITM PE Offset",-2,-40,-1,1);\nOTMoffsetPE = Param("OTM PE Offset",4,1,40,1);\n\npricetype = ParamList("Order Type","MARKET",0);\nproduct = ParamList("Product","MIS|NRML",1);\ntradetype = ParamList("Option Trade Type","BUY|SELL",0);\n\nquantity = Param("quanity(Lot Size)",1,0,10000)*LotSize;\nprice = 0; \ndisclosed_quantity = 0;\ntrigger_price = 0;\n\nhost = ParamStr("host","http://127.0.0.1:5000");\nver = ParamStr("API Version","v1");\n\n\nVoiceAlert = ParamList("Voice Alert","Disable|Enable",1);\n\n\nEnableAlgo = ParamList("AlgoStatus","Disable|Enable",0);\n\n\nbridgeurl = host+"/api/"+ver;\nresp = "";\n\n\n//Static Variables for Order protection\n\nstatic_name_ = Name()+GetChartID()+interval(2)+strategy;\nstatic_name_algo = Name()+GetChartID()+interval(2)+strategy+"algostatus";\n\n\n\n\n\n//OpenAlgo Dashboard\n\nGfxSelectFont( "BOOK ANTIQUA", 14, 100 );\nGfxSetBkMode( 1 );\nif(EnableAlgo == "Enable")\n{\nAlgoStatus = "Algo Enabled";\nGfxSetTextColor( colorGreen ); \nGfxTextOut( "Algostatus : "+AlgoStatus , 20, 40); \nif(Nz(StaticVarGet(static_name_algo),0)!=1)\n{\n_TRACE("Algo Status : Enabled");\nStaticVarSet(static_name_algo, 1);\n}\n}\nif(EnableAlgo == "Disable")\n{\nAlgoStatus = "Algo Disabled";\nGfxSetTextColor( colorRed ); \nGfxTextOut( "Algostatus : "+AlgoStatus , 20, 40); \nif(Nz(StaticVarGet(static_name_algo),0)!=0)\n{\n_TRACE("Algo Status : Disabled");\nStaticVarSet(static_name_algo, 0);\n}\n}\n\nif(StrikeCalculation=="PREVOPEN")\n{\nSetForeign(Symbol);\nspotC = LastValue(Ref(OPEN,-1));\nRestorePriceArrays();\n}\n\nif(StrikeCalculation=="PREVCLOSE")\n{\nSetForeign(Symbol);\nspotC = LastValue(Ref(Close,-1));\nRestorePriceArrays();\n}\n\nif(StrikeCalculation=="TODAYSOPEN")\n{\nSetForeign(Symbol);\nspotC = LastValue(TimeFrameGetPrice("O",inDaily));\nRestorePriceArrays();\n}\n\n//Maintain Array to Store ATM Strikes for each and every bar\nstrike = IIf(spotC % iInterval > iInterval/2, spotC - (spotC%iInterval) + iInterval,\n\t\t\tspotC - (spotC%iInterval));\n\t\t\t\n//ATM/ITM/OTM Entry/Exit Strikes\t\n\t\t\nATMstrikeCE = strike + (ATMoffsetCE * iInterval);\nATMstrikePE = strike - (ATMoffsetPE * iInterval);\n\nITMstrikeCE = strike + (ITMoffsetCE * iInterval);\nITMstrikePE = strike - (ITMoffsetPE * iInterval);\n\nOTMstrikeCE = strike + (OTMoffsetCE * iInterval);\nOTMstrikePE = strike - (OTMoffsetPE * iInterval);\n\n//ATM/ITM/OTM OpenAlgoSymbol Format\n\nATMsymbolCE = spot+expiry+ATMstrikeCE+"CE";\nATMsymbolPE = spot+expiry+ATMstrikePE+"PE";\n\nITMsymbolCE = spot+expiry+ITMstrikeCE+"CE";\nITMsymbolPE = spot+expiry+ITMstrikePE+"PE";\n\nOTMsymbolCE = spot+expiry+OTMstrikeCE+"CE";\nOTMsymbolPE = spot+expiry+OTMstrikePE+"PE";\n\n\nprintf("\\nATMsymbolCE = "+ATMsymbolCE);\nprintf("\\nATMsymbolPE = "+ATMsymbolPE);\n\nprintf("\\nITMsymbolCE = "+ITMsymbolCE);\nprintf("\\nITMsymbolPE = "+ITMsymbolPE);\n\nprintf("\\nOTMsymbolCE = "+OTMsymbolCE);\nprintf("\\nOTMsymbolPE = "+OTMsymbolPE);\n\nprintf("\\n ------Internal Memory-------");\nprintf("\\n ATMsymbolCE is : " + StaticVarGetText(static_name_+"ATMsymbolCE"));\nprintf("\\n ITMsymbolCE is : " + StaticVarGetText(static_name_+"ITMsymbolCE"));\nprintf("\\n OTMsymbolCE is : " + StaticVarGetText(static_name_+"OTMsymbolCE"));\n\nprintf("\\n ATMsymbolPE is : " + StaticVarGetText(static_name_+"ATMsymbolPE"));\nprintf("\\n ITMsymbolPE is : " + StaticVarGetText(static_name_+"ITMsymbolPE"));\nprintf("\\n OTMsymbolPE is : " + StaticVarGetText(static_name_+"OTMsymbolPE"));\n\n\n\n\n_SECTION_BEGIN("OpenAlgo Bridge Controls");\n\nEnableScript("VBScript"); \n<%\nPublic Sub PlaceOrder(symbol,action, quantity)\n\t\n    Dim oXMLHTTP\n    Dim oStream\n    Set oXMLHTTP = CreateObject("Msxml2.XMLHTTP")\n    \' Define variables with the specified values\n    Dim apikey, strategy , exchange, pricetype, product\n    apikey = AFL.Var("apikey")\n    strategy = AFL.Var("strategy")\n    \n    exchange = AFL.Var("exchange")\n    pricetype = AFL.Var("pricetype")\n    product = AFL.Var("product")\n   \n    \n    \' Construct the JSON string for the POST message\n    Dim jsonRequestBody\n    jsonRequestBody = "{""apikey"":""" & apikey & _\n    """,""strategy"":""" & strategy & _\n    """,""symbol"":""" & symbol & _\n    """,""action"":""" & action & _\n    """,""exchange"":""" & exchange & _\n    """,""pricetype"":""" & pricetype & _\n    """,""product"":""" & product & _\n    """,""quantity"":""" & quantity & """}"\n    \n    \' Set the URL\n    Dim url\n    url = AFL.Var("bridgeurl")&"/placeorder"\n    \n    \' MsgBox "API Request: " & jsonRequestBody, vbInformation, "API Information"\n    \n    \' Configure the HTTP request for POST method\n    oXMLHTTP.Open "POST", url, False\n    oXMLHTTP.setRequestHeader "Content-Type", "application/json"\n    oXMLHTTP.setRequestHeader "Cache-Control", "no-cache"\n    oXMLHTTP.setRequestHeader "Pragma", "no-cache"\n    \n    \' Send the request with the JSON body\n    oXMLHTTP.Send jsonRequestBody\n    \n    api_parameters = "Strategy :" & strategy & " Symbol :" & symbol & " Exchange :" & exchange & _\n                 " Action :" & action & " Pricetype :" & pricetype & _\n                 " Product :" & product & " Quantity:" & quantity & _\n                 " api_url :" & url\n\n    \n    \' MsgBox "API Request: " & oXMLHTTP.responseText, vbInformation, "API Information"\n    \n    \n    AFL("api_request") = api_parameters  \n    AFL("api_response") = oXMLHTTP.responseText\n    \n    \n    \' Optionally, handle the response here\n    \' Dim response\n    \' response = oXMLHTTP.responseText\n    \' Response handling code...\nEnd Sub\n\n\nPublic Sub ExitOrder(symbol)\n    Dim oXMLHTTP\n    Dim oStream\n    Set oXMLHTTP = CreateObject("Msxml2.XMLHTTP")\n    \' Define variables with the specified values\n    Dim apikey, strategy , exchange, pricetype, product\n    apikey = AFL.Var("apikey")\n    strategy = AFL.Var("strategy")\n    \n    exchange = AFL.Var("exchange")\n    pricetype = AFL.Var("pricetype")\n    product = AFL.Var("product")\n    position_size = "0"\n    quantity = "0"\n   \n    \n    \' Construct the JSON string for the POST message\n    Dim jsonRequestBody\n    jsonRequestBody = "{""apikey"":""" & apikey & _\n    """,""strategy"":""" & strategy & _\n    """,""symbol"":""" & symbol & _\n    """,""action"":""" & "SELL" & _\n    """,""exchange"":""" & exchange & _\n    """,""pricetype"":""" & pricetype & _\n    """,""product"":""" & product & _\n    """,""quantity"":""" & quantity & _\n    """,""position_size"":""" & position_size & """}"\n    \n    \' Set the URL\n    Dim url\n    url = AFL.Var("bridgeurl")&"/placesmartorder"\n    \n    \' Configure the HTTP request for POST method\n    oXMLHTTP.Open "POST", url, False\n    oXMLHTTP.setRequestHeader "Content-Type", "application/json"\n    oXMLHTTP.setRequestHeader "Cache-Control", "no-cache"\n    oXMLHTTP.setRequestHeader "Pragma", "no-cache"\n    \n    \' Send the request with the JSON body\n    oXMLHTTP.Send jsonRequestBody\n    \n    api_parameters = "Strategy :" & strategy & " Symbol :" & symbol & " Exchange :" & exchange & _\n                 " Action :" & action & " Pricetype :" & pricetype & _\n                 " Product :" & product & " Quantity:" & quantity & _\n                 " Position Size :" & position_size & " api_url :" & url\n\n    \n    AFL("ex_api_request") = api_parameters  \n    AFL("ex_api_response") = oXMLHTTP.responseText\n    \n    \n    \' Optionally, handle the response here\n    \' Dim response\n    \' response = oXMLHTTP.responseText\n    \' Response handling code...\nEnd Sub\n\n\n\nPublic Sub SquareoffAll()\n    Dim oXMLHTTP\n    Dim oStream\n    Set oXMLHTTP = CreateObject("Msxml2.XMLHTTP")\n    \' Define variables with the specified values\n    Dim apikey, strategy\n    apikey = AFL.Var("apikey")\n    strategy = AFL.Var("strategy")\n      \n    \n    \' Construct the JSON string for the POST message\n    Dim jsonRequestBody\n    jsonRequestBody = "{""apikey"":""" & apikey & _\n    """,""strategy"":""" & strategy & """}"\n    \n    \' Set the URL\n    Dim url\n    url = AFL.Var("bridgeurl")&"/closeposition"\n    \n    \' Configure the HTTP request for POST method\n    oXMLHTTP.Open "POST", url, False\n    oXMLHTTP.setRequestHeader "Content-Type", "application/json"\n    oXMLHTTP.setRequestHeader "Cache-Control", "no-cache"\n    oXMLHTTP.setRequestHeader "Pragma", "no-cache"\n    \n    \' Send the request with the JSON body\n    oXMLHTTP.Send jsonRequestBody\n    \n    api_parameters = "Strategy :" & strategy & " api_url :" & url\n\n    \n    AFL("sq_api_request") = api_parameters  \n    AFL("sq_api_response") = oXMLHTTP.responseText\n    \n    \n    \' Optionally, handle the response here\n    \' Dim response\n    \' response = oXMLHTTP.responseText\n    \' Response handling code...\nEnd Sub\n\n\n%>\n\n\nopenalgo = GetScriptObject();\n\n\n\n\n_SECTION_BEGIN("Button Trading -  For Old Amibroker Versions");\n\nX0 = 20;\nY0 = 100;\nX1 = 60;\n\nX2 = 20;\nY2 = 240;\nX3 = 60;\n\nLBClick = GetCursorMouseButtons() == 9;\t// Click\nMouseX  = Nz(GetCursorXPosition(1));\t\t// \nMouseY  = Nz(GetCursorYPosition(1));\t\t//\n\nprocedure DrawButton (Text, x1, y1, x2, y2, colorFrom, colorTo)\n{\n\tGfxSetOverlayMode(0);\n\tGfxSelectFont("Verdana", 9, 700);\n\tGfxSetBkMode(1);\n\tGfxGradientRect(x1, y1, x2, y2, colorFrom, colorTo);\n\tGfxDrawText(Text, x1, y1, x2, y2, 32|1|4|16);\n}\nGfxSetTextColor(colorWhite);\n\nif(EnableAlgo == "Enable")\n{  \n\n\tDrawButton("ATM CE", X0, Y0, X0+X1+50, Y0+50, colorGreen, colorGreen);\n\tCursorInATMCEButton = MouseX >= X0 AND MouseX <= X0+X1+50 AND MouseY >= Y0 AND MouseY <= Y0+50;\n\tATMCEButtonClick = CursorInATMCEButton AND LBClick;\n\t\n\tDrawButton("ITM CE", X0+115, Y0, X0+X1+165, Y0+50, colorRed, colorRed);\n\tCursorInITMCEButton = MouseX >= X0+115 AND MouseX <= X0+X1+165 AND MouseY >= Y0 AND MouseY <= Y0+50;\n\tITMCEButtonClick = CursorInITMCEButton AND LBClick;\n\t\n\tDrawButton("OTM CE", X0+230, Y0, X0+X1+280, Y0+50, colorBlue, colorBlue);\n\tCursorInOTMCEButton = MouseX >= X0+230 AND MouseX <= X0+X1+280 AND MouseY >= Y0 AND MouseY <= Y0+50;\n\tOTMCEButtonClick = CursorInOTMCEButton AND LBClick;\n\t\n\tDrawButton("x ATM CE", X0, Y0+55, X0+X1+50, Y0+105, colorGreen, colorGreen);\n\txCursorInATMCEButton = MouseX >= X0 AND MouseX <= X0+X1+50 AND MouseY >= Y0+55 AND MouseY <= Y0+105;\n\txATMCEButtonClick = xCursorInATMCEButton AND LBClick;\n\t\n\tDrawButton("x ITM CE", X0+115, Y0+55, X0+X1+165, Y0+105, colorRed, colorRed);\n\txCursorInITMCEButton = MouseX >= X0+115 AND MouseX <= X0+X1+165 AND MouseY >= Y0+55 AND MouseY <= Y0+105;\n\txITMCEButtonClick = xCursorInITMCEButton AND LBClick;\n\t\n\tDrawButton("x OTM CE", X0+230, Y0+55, X0+X1+280, Y0+105, colorBlue, colorBlue);\n\txCursorInOTMCEButton = MouseX >= X0+230 AND MouseX <= X0+X1+280 AND MouseY >= Y0+55 AND MouseY <= Y0+105;\n\txOTMCEButtonClick = xCursorInOTMCEButton AND LBClick;\n\t\n\t\n\tDrawButton("ATM PE", X2, Y2, X2+X3+50, Y2+50, colorGreen, colorGreen);\n\tCursorInATMPEButton = MouseX >= X2 AND MouseX <= X2+X3+50 AND MouseY >= Y2 AND MouseY <= Y2+50;\n\tATMPEButtonClick = CursorInATMPEButton AND LBClick;\n\t\n\tDrawButton("ITM PE", X2+115, Y2, X2+X3+165, Y2+50, colorRed, colorRed);\n\tCursorInITMPEButton = MouseX >= X2+115 AND MouseX <= X2+X3+165 AND MouseY >= Y2 AND MouseY <= Y2+50;\n\tITMPEButtonClick = CursorInITMPEButton AND LBClick;\n\t\n\tDrawButton("OTM PE", X2+230, Y2, X2+X3+280, Y2+50, colorBlue, colorBlue);\n\tCursorInOTMPEButton = MouseX >= X2+230 AND MouseX <= X2+X3+280 AND MouseY >= Y2 AND MouseY <= Y2+50;\n\tOTMPEButtonClick = CursorInOTMPEButton AND LBClick;\n\t\n\tDrawButton("x ATM PE", X2, Y2+55, X2+X3+50, Y2+105, colorGreen, colorGreen);\n\txCursorInATMPEButton = MouseX >= X2 AND MouseX <= X2+X3+50 AND MouseY >= Y2+55 AND MouseY <= Y2+105;\n\txATMPEButtonClick = xCursorInATMPEButton AND LBClick;\n\t\n\tDrawButton("x ITM PE", X2+115, Y2+55, X2+X3+165, Y2+105, colorRed, colorRed);\n\txCursorInITMPEButton = MouseX >= X2+115 AND MouseX <= X2+X3+165 AND MouseY >= Y2+55 AND MouseY <= Y2+105;\n\txITMPEButtonClick = xCursorInITMPEButton AND LBClick;\n\t\n\tDrawButton("x OTM PE", X2+230, Y2+55, X2+X3+280, Y2+105, colorBlue, colorBlue);\n\txCursorInOTMPEButton = MouseX >= X2+230 AND MouseX <= X2+X3+280 AND MouseY >= Y2+55 AND MouseY <= Y2+105;\n\txOTMPEButtonClick = xCursorInOTMPEButton AND LBClick;\n\t\n\t\n\tDrawButton("CLOSE ALL", X0, Y0+270, X0+X1+65, Y0+320, colorRed, colorRed);\n\tCursorInCXButton = MouseX >= X0 AND MouseX <= X0+X1+65 AND MouseY >= Y0+270 AND MouseY <= Y0+320;\n\tCXButtonClick = CursorInCXButton AND LBClick;\n\t\n\t\n\t\n\t// Logic for all buttons\n\t// ATM CE entry and exit logic\n\tif (ATMCEButtonClick AND StaticVarGet(static_name_ + "ATMCEAlgo") == 0) {\n\t\t_TRACE("Placing ATM CE Entry Order");\n\t\topenalgo.placeorder(ATMsymbolCE, tradetype, quantity);\n\t\tStaticVarSetText(static_name_+"ATMsymbolCE",ATMsymbolCE,True);\n\t\tif (VoiceAlert == "Enable") { Say("ATM CE Order Triggered"); }\n\t\t_TRACE("API Request : " + api_request);\n\t\t_TRACE("API Response : " + api_response);\n\t\tStaticVarSet(static_name_ + "ATMCEAlgo", 1);\n\t} else { StaticVarSet(static_name_ + "ATMCEAlgo", 0); }\n\n\tif (xATMCEButtonClick AND StaticVarGet(static_name_ + "xATMCEAlgo") == 0) {\n\t\t_TRACE("Placing ATM CE Exit Order");\n\t\texitsymbol = StaticVarGetText(static_name_+"ATMsymbolCE");\n\t\tif(exitsymbol!="")\n\t\t{\n\t\topenalgo.exitorder(exitsymbol);\n\t\tStaticVarSetText(static_name_+"ATMsymbolCE","");\n\t\tif (VoiceAlert == "Enable") { Say("Exit ATM CE Order Triggered"); }\n\t\t_TRACE("API Request : " + ex_api_request);\n\t\t_TRACE("API Response : " + ex_api_response);\n\t\tStaticVarSet(static_name_ + "xATMCEAlgo", 1);\n\t\t}\n\t\telse\n\t\t{\n\t\tSay("No Open Orders to Exit");\n\t\t_TRACE("No Open Orders to Exit");\n\t\t}\n\t} else { StaticVarSet(static_name_ + "xATMCEAlgo", 0); }\n\n\t// ITM CE entry and exit logic\n\tif (ITMCEButtonClick AND StaticVarGet(static_name_ + "ITMCEAlgo") == 0) {\n\t\t_TRACE("Placing ITM CE Entry Order");\n\t\topenalgo.placeorder(ITMsymbolCE, tradetype, quantity);\n\t\tStaticVarSetText(static_name_+"ITMsymbolCE",ITMsymbolCE,True);\n\t\tif (VoiceAlert == "Enable") { Say("ITM CE Order Triggered"); }\n\t\t_TRACE("API Request : " + api_request);\n\t\t_TRACE("API Response : " + api_response);\n\t\tStaticVarSet(static_name_ + "ITMCEAlgo", 1);\n\t} else { StaticVarSet(static_name_ + "ITMCEAlgo", 0); }\n\n\tif (xITMCEButtonClick AND StaticVarGet(static_name_ + "xITMCEAlgo") == 0) {\n\t\t_TRACE("Placing ITM CE Exit Order");\n\t\texitsymbol = StaticVarGetText(static_name_+"ITMsymbolCE");\n\t\tif(exitsymbol!="")\n\t\t{\n\t\topenalgo.exitorder(exitsymbol);\n\t\tStaticVarSetText(static_name_+"ITMsymbolCE","");\n\t\tif (VoiceAlert == "Enable") { Say("Exit ITM CE Order Triggered"); }\n\t\t_TRACE("API Request : " + ex_api_request);\n\t\t_TRACE("API Response : " + ex_api_response);\n\t\tStaticVarSet(static_name_ + "xITMCEAlgo", 1);\n\t\t}\n\t\telse\n\t\t{\n\t\tSay("No Open Orders to Exit");\n\t\t_TRACE("No Open Orders to Exit");\n\t\t}\n\t} else { StaticVarSet(static_name_ + "xITMCEAlgo", 0); }\n\n\t// OTM CE entry and exit logic\n\tif (OTMCEButtonClick AND StaticVarGet(static_name_ + "OTMCEAlgo") == 0) {\n\t\t_TRACE("Placing OTM CE Entry Order");\n\t\topenalgo.placeorder(OTMsymbolCE, tradetype, quantity);\n\t\tStaticVarSetText(static_name_+"OTMsymbolCE",OTMsymbolCE,True);\n\t\tif (VoiceAlert == "Enable") { Say("OTM CE Order Triggered"); }\n\t\t_TRACE("API Request : " + api_request);\n\t\t_TRACE("API Response : " + api_response);\n\t\tStaticVarSet(static_name_ + "OTMCEAlgo", 1);\n\t} else { StaticVarSet(static_name_ + "OTMCEAlgo", 0); }\n\n\tif (xOTMCEButtonClick AND StaticVarGet(static_name_ + "xOTMCEAlgo") == 0) {\n\t\t_TRACE("Placing OTM CE Exit Order");\n\t\texitsymbol = StaticVarGetText(static_name_+"OTMsymbolCE");\n\t\tif(exitsymbol!="")\n\t\t{\n\t\topenalgo.exitorder(exitsymbol);\n\t\tStaticVarSetText(static_name_+"OTMsymbolCE","");\n\t\tif (VoiceAlert == "Enable") { Say("Exit OTM CE Order Triggered"); }\n\t\t_TRACE("API Request : " + ex_api_request);\n\t\t_TRACE("API Response : " + ex_api_response);\n\t\tStaticVarSet(static_name_ + "xOTMCEAlgo", 1);\n\t\t}\n\t\telse\n\t\t{\n\t\tSay("No Open Orders to Exit");\n\t\t_TRACE("No Open Orders to Exit");\n\t\t}\n\t} else { StaticVarSet(static_name_ + "xOTMCEAlgo", 0); }\n\n\t// ATM PE entry and exit logic\n\tif (ATMPEButtonClick AND StaticVarGet(static_name_ + "ATMPEAlgo") == 0) {\n\t\t_TRACE("Placing ATM PE Entry Order");\n\t\topenalgo.placeorder(ATMsymbolPE, tradetype, quantity);\n\t\tStaticVarSetText(static_name_+"ATMsymbolPE",ATMsymbolPE,True);\n\t\tif (VoiceAlert == "Enable") { Say("ATM PE Order Triggered"); }\n\t\t_TRACE("API Request : " + api_request);\n\t\t_TRACE("API Response : " + api_response);\n\t\tStaticVarSet(static_name_ + "ATMPEAlgo", 1);\n\t} else { StaticVarSet(static_name_ + "ATMPEAlgo", 0); }\n\n\tif (xATMPEButtonClick AND StaticVarGet(static_name_ + "xATMPEAlgo") == 0) {\n\t\t_TRACE("Placing ATM PE Exit Order");\n\t\texitsymbol = StaticVarGetText(static_name_+"ATMsymbolPE");\n\t\tif(exitsymbol!="")\n\t\t{\n\t\topenalgo.exitorder(exitsymbol);\n\t\tStaticVarSetText(static_name_+"ATMsymbolPE","");\n\t\tif (VoiceAlert == "Enable") { Say("Exit ATM PE Order Triggered"); }\n\t\t_TRACE("API Request : " + ex_api_request);\n\t\t_TRACE("API Response : " + ex_api_response);\n\t\tStaticVarSet(static_name_ + "xATMPEAlgo", 1);\n\t\t}\n\t\telse\n\t\t{\n\t\tSay("No Open Orders to Exit");\n\t\t_TRACE("No Open Orders to Exit");\n\t\t}\n\t} else { StaticVarSet(static_name_ + "xATMPEAlgo", 0); }\n\n\t// ITM PE entry and exit logic\n\tif (ITMPEButtonClick AND StaticVarGet(static_name_ + "ITMPEAlgo") == 0) {\n\t\t_TRACE("Placing ITM PE Entry Order");\n\t\topenalgo.placeorder(ITMsymbolPE, tradetype, quantity);\n\t\tStaticVarSetText(static_name_+"ITMsymbolPE",ITMsymbolPE,True);\n\t\tif (VoiceAlert == "Enable") { Say("ITM PE Order Triggered"); }\n\t\t_TRACE("API Request : " + api_request);\n\t\t_TRACE("API Response : " + api_response);\n\t\tStaticVarSet(static_name_ + "ITMPEAlgo", 1);\n\n\t} else { StaticVarSet(static_name_ + "ITMPEAlgo", 0); }\n\n\tif (xITMPEButtonClick AND StaticVarGet(static_name_ + "xITMPEAlgo") == 0) {\n\t\t_TRACE("Placing ITM PE Exit Order");\n\t\t\t\texitsymbol = StaticVarGetText(static_name_+"ITMsymbolPE");\n\t\tif(exitsymbol!="")\n\t\t{\n\t\topenalgo.exitorder(exitsymbol);\n\t\tStaticVarSetText(static_name_+"ITMsymbolPE","");\n\t\tif (VoiceAlert == "Enable") { Say("Exit ITM PE Order Triggered"); }\n\t\t_TRACE("API Request : " + ex_api_request);\n\t\t_TRACE("API Response : " + ex_api_response);\n\t\tStaticVarSet(static_name_ + "xITMPEAlgo", 1);\n\t\t}\n\t\telse\n\t\t{\n\t\tSay("No Open Orders to Exit");\n\t\t_TRACE("No Open Orders to Exit");\n\t\t}\n\t} else { StaticVarSet(static_name_ + "xITMPEAlgo", 0); }\n\n\t// OTM PE entry and exit logic\n\tif (OTMPEButtonClick AND StaticVarGet(static_name_ + "OTMPEAlgo") == 0) {\n\t\t_TRACE("Placing OTM PE Entry Order");\n\t\topenalgo.placeorder(OTMsymbolPE, tradetype, quantity);\n\t\tStaticVarSetText(static_name_+"OTMsymbolPE",OTMsymbolPE,True);\n\t\tif (VoiceAlert == "Enable") { Say("OTM PE Order Triggered"); }\n\t\t_TRACE("API Request : " + api_request);\n\t\t_TRACE("API Response : " + api_response);\n\t\tStaticVarSet(static_name_ + "OTMPEAlgo", 1);\n\t} else { StaticVarSet(static_name_ + "OTMPEAlgo", 0); }\n\n\tif (xOTMPEButtonClick AND StaticVarGet(static_name_ + "xOTMPEAlgo") == 0) {\n\t\t_TRACE("Placing OTM PE Exit Order");\n\t\texitsymbol = StaticVarGetText(static_name_+"OTMsymbolPE");\n\t\tif(exitsymbol!="")\n\t\t{\n\t\topenalgo.exitorder(exitsymbol);\n\t\tStaticVarSetText(static_name_+"OTMsymbolPE","");\n\t\tif (VoiceAlert == "Enable") { Say("Exit OTM PE Order Triggered"); }\n\t\t_TRACE("API Request : " + ex_api_request);\n\t\t_TRACE("API Response : " + ex_api_response);\n\t\tStaticVarSet(static_name_ + "xOTMPEAlgo", 1);\n\t\t}\n\t\telse\n\t\t{\n\t\tSay("No Open Orders to Exit");\n\t\t_TRACE("No Open Orders to Exit");\n\t\t}\n\t} else { StaticVarSet(static_name_ + "xOTMPEAlgo", 0); }\n\n\n\t\n\t\n\tif( CXButtonClick AND StaticVarGet(Name()+GetChartID()+"CXAlgo")==0 ) \n\t{\n\t\topenalgo.Squareoffall();\n\t\tif(VoiceAlert == "Enable"){\n\t\t\t\tSay("Squareoff All Triggered");  \t\n\t\t\t}\n\t\t_TRACE("API Request : "+sq_api_request);\n\t\t_TRACE("API Response : "+sq_api_response);\n\t\tStaticVarSet(Name()+GetChartID()+"CXAlgo",1); \n\t}\n\telse\n\t{\n\t\tStaticVarSet(Name()+GetChartID()+"CXAlgo",0);\n\t}\n\t\n\t\n}\n\n_SECTION_END();\n\n\n_SECTION_BEGIN("Candlestick Charts with Date & Time Axis");\n\n//Enable the Date & Time Axis\nSetChartOptions(0, chartShowArrows | chartShowDates);\n\n//Plotting Candlestick charts\nPlot(Close,"Candle",colorDefault,styleCandle);\n\n\n_SECTION_END();\n\n'})})]})}function u(t={}){const{wrapper:e}={...(0,r.R)(),...t.components};return e?(0,a.jsx)(e,{...t,children:(0,a.jsx)(T,{...t})}):T(t)}},8453:(t,e,n)=>{n.d(e,{R:()=>i,x:()=>s});var o=n(6540);const a={},r=o.createContext(a);function i(t){const e=o.useContext(r);return o.useMemo(function(){return"function"==typeof t?t(e):{...e,...t}},[e,t])}function s(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(a):t.components||a:i(t.components),o.createElement(r.Provider,{value:e},t.children)}}}]);