<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-trading-platform/amibroker/line-trading-module" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Line Trading Module | Layr0 Org Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.layr0.org/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.layr0.org/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://docs.layr0.org/docs/trading-platform/amibroker/line-trading-module"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Line Trading Module | Layr0 Org Documentation"><meta data-rh="true" name="description" content="The line Trading Automation tool is designed for Manual traders who want to perform level-based trade execution faster and also bring some advanced trade management in their trades (multiple entries, targets, stops, pyramiding, martingale, etc)"><meta data-rh="true" property="og:description" content="The line Trading Automation tool is designed for Manual traders who want to perform level-based trade execution faster and also bring some advanced trade management in their trades (multiple entries, targets, stops, pyramiding, martingale, etc)"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.layr0.org/docs/trading-platform/amibroker/line-trading-module"><link data-rh="true" rel="alternate" href="https://docs.layr0.org/docs/trading-platform/amibroker/line-trading-module" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.layr0.org/docs/trading-platform/amibroker/line-trading-module" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Amibroker","item":"https://docs.layr0.org/docs/trading-platform/amibroker/"},{"@type":"ListItem","position":2,"name":"Line Trading Module","item":"https://docs.layr0.org/docs/trading-platform/amibroker/line-trading-module"}]}</script><link rel="stylesheet" href="/assets/css/styles.8fefdf5d.css">
<script src="/assets/js/runtime~main.bfcdbb38.js" defer="defer"></script>
<script src="/assets/js/main.a2458cbf.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><link rel="preload" as="image" href="/assets/images/image (42)-93a15187078ac13f1b41e36f3f6c3825.png"><link rel="preload" as="image" href="/assets/images/image (43)-60ab625e363a55b9957afd041a137c36.png"><link rel="preload" as="image" href="/assets/images/image (44)-dfa9e867d969be8faa96a24bf84f073c.png"><link rel="preload" as="image" href="/assets/images/image (45)-51e8a8cac0541e3591801da177386247.png"><link rel="preload" as="image" href="/assets/images/image (46)-c75383b49f1d5f2316ee3d2ee78657f7.png"><link rel="preload" as="image" href="/assets/images/image (47)-807ef5b8b64efa8f452e27a3b94c2f65.png"><link rel="preload" as="image" href="/assets/images/image (48)-ca948bf6ee4005477c6c64eae42ccb09.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Layr Zero Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Layr Zero Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Layr0 Docs</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/why-to-build-with-Layr0">Tutorial</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/layrZero/layrZero.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/why-to-build-with-Layr0">Why to Build with Layr0?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">What is OpenAlgo?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/SUMMARY">Table of contents</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/api-documentation/v1/">api-documentation</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/community-support">Community Support</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/connect-brokers/brokers/">connect-brokers</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/latency">Latency</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/mcp">MCP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/mini-foss-universe">Mini FOSS Universe</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/new-features/">New Features</a><button aria-label="Expand sidebar category &#x27;New Features&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/openalgo-architecture">OpenAlgo Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/openalgo-gpt">OpenAlgo GPT</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/static-ip">Static IP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/strategy-management">Strategy Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/symbol-format">Symbol Format</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/trading-platform/amibroker/">trading-platform</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/trading-platform/amibroker/">Amibroker</a><button aria-label="Collapse sidebar category &#x27;Amibroker&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trading-platform/amibroker/amiquotes">AmiQuotes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trading-platform/amibroker/button-trading-module-modern">Button Trading Module (Modern)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trading-platform/amibroker/button-trading-module-old">Button Trading Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trading-platform/amibroker/button-trading-with-spit-order-options">Button Trading with Spit Order (Options)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trading-platform/amibroker/button-trading-with-split-orders">Button Trading with Split Orders</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trading-platform/amibroker/button-trading-with-stoploss">Button Trading with Stoploss</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trading-platform/amibroker/csv-exploration-module">CSV Exploration Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trading-platform/amibroker/equity-exploration-module">Equity Exploration Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/trading-platform/amibroker/line-trading-module">Line Trading Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trading-platform/amibroker/options-button-trading-module">Options Button Trading Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trading-platform/amibroker/smartorder-chart-module">SmartOrder Chart Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trading-platform/amibroker/spot-futures-to-options-module-single-leg">Spot/Futures to Options Module (Single Leg)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trading-platform/amibroker/spot-futures-to-options-module-two-leg">Spot/Futures to Options Module (Two Leg)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trading-platform/amibroker/time-based-execution">Time Based Execution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trading-platform/amibroker/trailing-stoploss-execution-module">Trailing Stoploss Execution Module</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trading-platform/chartink">ChartInk</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trading-platform/chrome-extension">Chrome Extension</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trading-platform/excel">Excel</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trading-platform/google-spreadsheets">Google Spreadsheets</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/trading-platform/metatrader-5/">Metatrader 5</a><button aria-label="Expand sidebar category &#x27;Metatrader 5&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trading-platform/n8n">N8N</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trading-platform/nodejs">NodeJS</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/trading-platform/python/">Python</a><button aria-label="Expand sidebar category &#x27;Python&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/trading-platform/tradingview/futures-to-options-module">tradingview</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trading-platform/tradingview">Tradingview</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">trading-platform</span></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/trading-platform/amibroker/"><span>Amibroker</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Line Trading Module</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Line Trading Module</h1></header>
<p>The line Trading Automation tool is designed for Manual traders who want to perform level-based trade execution faster and also bring some advanced trade management in their trades (multiple entries, targets, stops, pyramiding, martingale, etc)</p>
<p>\</p>
<img src="/assets/images/image (42)-93a15187078ac13f1b41e36f3f6c3825.png">
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-line-trading-automation-10"><strong>What is Line Trading Automation 1.0?</strong><a href="#what-is-line-trading-automation-10" class="hash-link" aria-label="Direct link to what-is-line-trading-automation-10" title="Direct link to what-is-line-trading-automation-10">​</a></h3>
<p>•Draw Horizontal Lines or Trend Lines in Amibroker When the levels are touched then the Line Trade Automation Module will convert into signals and orders will be transmitted to the broker automatically.</p>
<p>•Module <strong>Supports Multiple Entry, Targets, Stoploss levels</strong> can be drawn and converted into orders, Supports pyramiding.</p>
<p>•Module <strong>prevents placing multiple orders</strong> at the same signal</p>
<p>•Supports <strong>Intraday and Positional Trades</strong></p>
<p>•Supports <strong>3 Long Entry, 3 Long Exit(Target/Stoploss), 3 Short Entries</strong>, and <strong>3 Short Exit (Target/Stoploss)</strong> Line based trading.</p>
<div class="language-clike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-clike codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//Module - Line Pair Tading Automation Module </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//Rajandran R - Creator of OpenAlgo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//website - openalgo.in / marketcalls.in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//OpenAlgo - Amibroker SmartOrder Chart Trading Module v1.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//Date - 29/05/2024</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_SECTION_BEGIN</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;OpenAlgo Trading Controls&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">RequestTimedRefresh</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">False</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apikey </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ParamStr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;OpenAlgo API Key&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;******&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">strategy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ParamStr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Strategy&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Amibroker&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">symbol </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ParamStr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Symbol&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;YESBANK&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exchange </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ParamList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Exchange&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;NSE|NFO|BSE|MCX|CDS&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pricetype </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ParamStr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Price Type&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MARKET&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">product </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ParamList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Product&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MIS|NRML|CNC&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">quantity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Param</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Quantity&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Entrydelay </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Param</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Entry Delay&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Exitdelay </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Param</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Exit Delay&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">host </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ParamStr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;host&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;http://127.0.0.1:5000&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ver </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ParamStr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;API Version&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;v1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VoiceAlert </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ParamList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Voice Alert&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;Disable|Enable&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EnableAlgo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ParamList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Algo Mode&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;Disable|Enable&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Algo Mode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bridgeurl </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> host</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;/api/&quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">ver</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//Static Variables for Order protection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">static_name_ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">+</span><span class="token function" style="color:#d73a49">GetChartID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">+</span><span class="token function" style="color:#d73a49">interval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">strategy</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">static_name_algo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">+</span><span class="token function" style="color:#d73a49">GetChartID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">+</span><span class="token function" style="color:#d73a49">interval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">strategy</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;algostatus&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//Mapping of Orders</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iBuy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;BUY&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iSell </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;SELL&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">GfxSelectFont</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;BOOK ANTIQUA&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">GfxSetBkMode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">EnableAlgo </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Enable&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AlgoStatus </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Algo Enabled&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">GfxSetTextColor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> colorGreen </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">GfxTextOut</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Algostatus : &quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">AlgoStatus </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">static_name_algo</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">!=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Algo Status : Enabled&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">static_name_algo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">EnableAlgo </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Disable&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AlgoStatus </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Algo Disabled&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">GfxSetTextColor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> colorRed </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">GfxTextOut</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Algostatus : &quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">AlgoStatus </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">static_name_algo</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">!=</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Algo Status : Disabled&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">static_name_algo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_SECTION_BEGIN</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;OpenAlgo Bridge Controls&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">EnableScript</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;VBScript&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Public Sub </span><span class="token function" style="color:#d73a49">PlaceOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> quantity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dim oXMLHTTP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dim oStream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Set oXMLHTTP </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">CreateObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Msxml2.XMLHTTP&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Define variables with the specified values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dim apikey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> strategy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> symbol </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> exchange</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pricetype</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> product</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apikey </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;apikey&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    strategy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;strategy&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    symbol </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;symbol&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exchange </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;exchange&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pricetype </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;pricetype&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    product </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;product&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Construct the JSON string </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> the POST message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dim jsonRequestBody</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    jsonRequestBody </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;{&quot;</span><span class="token string" style="color:#e3116c">&quot;apikey&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> apikey </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;strategy&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> strategy </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;symbol&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> symbol </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;action&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> action </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;exchange&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> exchange </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;pricetype&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> pricetype </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;product&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> product </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;quantity&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> quantity </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Set the URL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dim url</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;bridgeurl&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token string" style="color:#e3116c">&quot;/placeorder&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Configure the HTTP request </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> POST method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Open </span><span class="token string" style="color:#e3116c">&quot;POST&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> url</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setRequestHeader </span><span class="token string" style="color:#e3116c">&quot;Content-Type&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;application/json&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setRequestHeader </span><span class="token string" style="color:#e3116c">&quot;Cache-Control&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;no-cache&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setRequestHeader </span><span class="token string" style="color:#e3116c">&quot;Pragma&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;no-cache&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Send the request with the JSON body</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Send jsonRequestBody</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    api_parameters </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Strategy :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> strategy </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; Symbol :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> symbol </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; Exchange :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> exchange </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token string" style="color:#e3116c">&quot; Action :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> action </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; Pricetype :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> pricetype </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token string" style="color:#e3116c">&quot; Product :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> product </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; Quantity:&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> quantity </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token string" style="color:#e3116c">&quot; api_url :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> url</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">AFL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;api_request&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> api_parameters  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">AFL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;api_response&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">responseText</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Optionally</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> handle the response here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Dim response</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">responseText</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Response handling code</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">End Sub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Public Sub </span><span class="token function" style="color:#d73a49">PlaceSmartOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> quantity</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">position_size</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dim oXMLHTTP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dim oStream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Set oXMLHTTP </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">CreateObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Msxml2.XMLHTTP&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Define variables with the specified values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dim apikey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> strategy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> symbol </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> exchange</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pricetype</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> product</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apikey </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;apikey&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    strategy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;strategy&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    symbol </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;symbol&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exchange </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;exchange&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pricetype </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;pricetype&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    product </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;product&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Construct the JSON string </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> the POST message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dim jsonRequestBody</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    jsonRequestBody </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;{&quot;</span><span class="token string" style="color:#e3116c">&quot;apikey&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> apikey </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;strategy&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> strategy </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;symbol&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> symbol </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;action&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> action </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;exchange&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> exchange </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;pricetype&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> pricetype </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;product&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> product </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;quantity&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> quantity </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;position_size&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> position_size </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Set the URL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dim url</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;bridgeurl&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token string" style="color:#e3116c">&quot;/placesmartorder&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Configure the HTTP request </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> POST method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Open </span><span class="token string" style="color:#e3116c">&quot;POST&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> url</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setRequestHeader </span><span class="token string" style="color:#e3116c">&quot;Content-Type&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;application/json&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setRequestHeader </span><span class="token string" style="color:#e3116c">&quot;Cache-Control&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;no-cache&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setRequestHeader </span><span class="token string" style="color:#e3116c">&quot;Pragma&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;no-cache&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Send the request with the JSON body</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Send jsonRequestBody</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    api_parameters </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Strategy :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> strategy </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; Symbol :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> symbol </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; Exchange :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> exchange </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token string" style="color:#e3116c">&quot; Action :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> action </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; Pricetype :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> pricetype </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token string" style="color:#e3116c">&quot; Product :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> product </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; Quantity:&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> quantity </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token string" style="color:#e3116c">&quot; Position Size :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> position_size </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; api_url :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> url</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">AFL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;sm_api_request&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> api_parameters  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">AFL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;sm_api_response&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">responseText</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Optionally</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> handle the response here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Dim response</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">responseText</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Response handling code</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">End Sub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Public Sub </span><span class="token function" style="color:#d73a49">ExitOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dim oXMLHTTP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dim oStream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Set oXMLHTTP </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">CreateObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Msxml2.XMLHTTP&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Define variables with the specified values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dim apikey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> strategy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> symbol </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> exchange</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pricetype</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> product</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apikey </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;apikey&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    strategy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;strategy&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    symbol </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;symbol&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exchange </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;exchange&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pricetype </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;pricetype&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    product </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;product&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    position_size </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    quantity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Construct the JSON string </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> the POST message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dim jsonRequestBody</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    jsonRequestBody </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;{&quot;</span><span class="token string" style="color:#e3116c">&quot;apikey&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> apikey </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;strategy&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> strategy </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;symbol&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> symbol </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;action&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> action </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;exchange&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> exchange </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;pricetype&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> pricetype </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;product&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> product </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;quantity&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> quantity </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;position_size&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> position_size </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Set the URL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dim url</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;bridgeurl&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token string" style="color:#e3116c">&quot;/placesmartorder&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Configure the HTTP request </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> POST method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Open </span><span class="token string" style="color:#e3116c">&quot;POST&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> url</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setRequestHeader </span><span class="token string" style="color:#e3116c">&quot;Content-Type&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;application/json&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setRequestHeader </span><span class="token string" style="color:#e3116c">&quot;Cache-Control&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;no-cache&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setRequestHeader </span><span class="token string" style="color:#e3116c">&quot;Pragma&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;no-cache&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Send the request with the JSON body</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Send jsonRequestBody</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    api_parameters </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Strategy :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> strategy </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; Symbol :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> symbol </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; Exchange :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> exchange </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token string" style="color:#e3116c">&quot; Action :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> action </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; Pricetype :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> pricetype </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token string" style="color:#e3116c">&quot; Product :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> product </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; Quantity:&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> quantity </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token string" style="color:#e3116c">&quot; Position Size :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> position_size </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; api_url :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> url</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">AFL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;ex_api_request&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> api_parameters  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">AFL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;ex_api_response&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">responseText</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Optionally</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> handle the response here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Dim response</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">responseText</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Response handling code</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">End Sub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Public Sub </span><span class="token function" style="color:#d73a49">SquareoffAll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dim oXMLHTTP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dim oStream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Set oXMLHTTP </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">CreateObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Msxml2.XMLHTTP&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Define variables with the specified values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dim apikey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> strategy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apikey </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;apikey&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    strategy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;strategy&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Construct the JSON string </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> the POST message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dim jsonRequestBody</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    jsonRequestBody </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;{&quot;</span><span class="token string" style="color:#e3116c">&quot;apikey&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> apikey </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token string" style="color:#e3116c">&quot;strategy&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> strategy </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token string" style="color:#e3116c">&quot;}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Set the URL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dim url</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AFL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;bridgeurl&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token string" style="color:#e3116c">&quot;/closeposition&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Configure the HTTP request </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> POST method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Open </span><span class="token string" style="color:#e3116c">&quot;POST&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> url</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setRequestHeader </span><span class="token string" style="color:#e3116c">&quot;Content-Type&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;application/json&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setRequestHeader </span><span class="token string" style="color:#e3116c">&quot;Cache-Control&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;no-cache&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setRequestHeader </span><span class="token string" style="color:#e3116c">&quot;Pragma&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;no-cache&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Send the request with the JSON body</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Send jsonRequestBody</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    api_parameters </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Strategy :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> strategy </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; api_url :&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> url</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">AFL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;sq_api_request&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> api_parameters  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">AFL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;sq_api_response&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">responseText</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Optionally</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> handle the response here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Dim response</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> oXMLHTTP</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">responseText</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27; Response handling code</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">End Sub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">%</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetScriptObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_SECTION_END</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_SECTION_BEGIN</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Line Pair Trading Module&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">SetBarsRequired</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//turning off quick afl</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">SetChartOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">chartShowArrows</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">chartShowDates</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_N</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Title </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">StrFormat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;{{NAME}} - {{INTERVAL}} {{DATE}} Open %g, Hi %g, Lo %g, Close %g (%.1f%%) {{VALUES}}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> O</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> L</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> C</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SelectedValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ROC</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> C</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">Plot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> C</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Close&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ParamColor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Color&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> colorDefault </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> styleNoTitle </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ParamStyle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Style&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetPriceStyle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_SECTION_END</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//Static Variables will be saved in Amibroker every 60 seconds once</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">SetOption</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;StaticVarAutoSave&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">60</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Send orders even if Amibroker is minimized or Chart is not active</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">RequestTimedRefresh</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> False</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">EnableTextOutput</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">False</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IntradayMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ParamList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Intraday Mode&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;ON|OFF&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StartTradeTime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ParamTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Start Time&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;09:30&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EndTradeTime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ParamTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;End Time&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;15:00&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExitTradeTime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ParamTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Squareoff Time&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;15:15&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BuyMode</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">ParamToggle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Buy Mode&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;BUY ABOVE|BUY BELOW&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SellMode</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">ParamToggle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Sell Mode&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;SELL ABOVE|SELL BELOW&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ShortMode</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">ParamToggle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Short Mode&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;SHORT ABOVE|SHORT BELOW&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CoverMode</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">ParamToggle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Cover Mode&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;COVER ABOVE|COVER BELOW&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExitPos </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ParamList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Exit Positions&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;CURRENT|ALLOPENPOSITIONS&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">buyquantity1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Param</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Buy Quantity1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">10000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">buyquantity2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Param</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Buy Quantity2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">10000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">buyquantity3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Param</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Buy Quantity3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">10000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shortquantity1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Param</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Short Quantity1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">10000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shortquantity2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Param</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Short Quantity2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">10000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shortquantity3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Param</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Short Quantity3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">10000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clear </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ParamTrigger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Reset Trades and Signals&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;Press to Reset&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">staticvar </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">+</span><span class="token function" style="color:#d73a49">Interval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">+</span><span class="token function" style="color:#d73a49">GetChartID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">clear</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarRemove</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;*&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Static Variables Cleared&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">Plot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> C</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Price&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> colorBlack</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> styleCandle </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">BuyMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> 	Buydisplaytext </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Buy Above&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">BuyMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  Buydisplaytext </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Buy Below&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SellMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> Selldisplaytext </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Sell Above&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SellMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> Selldisplaytext </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Sell Below&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ShortMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> Shortdisplaytext </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Short Above&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ShortMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> Shortdisplaytext </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Short Below&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CoverMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> Coverdisplaytext </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Cover Above&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CoverMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> Coverdisplaytext </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Cover Below&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">B1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Study</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;B1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetChartID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">B2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Study</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;B2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetChartID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">B3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Study</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;B3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetChartID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">X1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Study</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;X1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetChartID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">X2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Study</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;X2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetChartID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">X3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Study</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;X3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetChartID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Study</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;S1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetChartID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Study</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;S2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetChartID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Study</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;S3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetChartID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">C1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Study</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;C1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetChartID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">C2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Study</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;C2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetChartID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">C3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Study</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;C3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetChartID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">lineplot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">quantity</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">displaytext</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">textcolor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;B1&quot;</span><span class="token plain"> OR text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;B2&quot;</span><span class="token plain"> OR text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;B3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> colorGreen</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;X1&quot;</span><span class="token plain"> OR text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;X2&quot;</span><span class="token plain"> OR text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;X3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> colorRed</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;S1&quot;</span><span class="token plain"> OR text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;S2&quot;</span><span class="token plain"> OR text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;S3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> colorBrown</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;C1&quot;</span><span class="token plain"> OR text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;C2&quot;</span><span class="token plain"> OR text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;C3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> colorBlue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorGrey40</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ValueWhen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ExRem</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">DateTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> x</span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> AND </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;B1&quot;</span><span class="token plain"> OR text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;B2&quot;</span><span class="token plain"> OR text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;B3&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">PlotText</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;    &quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">Displaytext</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot; : &quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">value</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;    Qty =&quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">quantity</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">BarCount</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorWhite</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">textcolor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> x</span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">  AND </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;S1&quot;</span><span class="token plain"> OR text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;S2&quot;</span><span class="token plain"> OR text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;S3&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">PlotText</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;    &quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">Displaytext</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot; : &quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">value</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;    Qty =&quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">quantity</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">BarCount</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorWhite</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">textcolor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> x</span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> AND ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;CURRENT&quot;</span><span class="token plain"> AND </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;X1&quot;</span><span class="token plain"> OR text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;X2&quot;</span><span class="token plain"> OR text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;X3&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">PlotText</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;    &quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">Displaytext</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot; : &quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">value</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;    Qty =&quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">quantity</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">BarCount</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorWhite</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">textcolor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> x</span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> AND ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;CURRENT&quot;</span><span class="token plain"> AND </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;C1&quot;</span><span class="token plain"> OR text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;C2&quot;</span><span class="token plain"> OR text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;C3&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">PlotText</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;    &quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">Displaytext</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot; : &quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">value</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;    Qty =&quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">quantity</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">BarCount</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorWhite</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">textcolor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> x</span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> AND ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ALLOPENPOSITIONS&quot;</span><span class="token plain"> AND </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;X1&quot;</span><span class="token plain"> OR text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;X2&quot;</span><span class="token plain"> OR text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;X3&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">PlotText</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;    &quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">Displaytext</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot; : &quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">value</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;    Qty = All&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">BarCount</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorWhite</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">textcolor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> x</span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> AND ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ALLOPENPOSITIONS&quot;</span><span class="token plain"> AND </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;C1&quot;</span><span class="token plain"> OR text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;C2&quot;</span><span class="token plain"> OR text</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;C3&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">PlotText</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;    &quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">Displaytext</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot; : &quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">value</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;   Qty = All&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">BarCount</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorWhite</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">textcolor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">lineplot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">B1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;B1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">buyquantity1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">Buydisplaytext</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">lineplot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">B2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;B2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">buyquantity2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">Buydisplaytext</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">lineplot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">B3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;B3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">buyquantity3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">Buydisplaytext</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">lineplot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">X1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;X1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">buyquantity1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">Selldisplaytext</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">lineplot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">X2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;X2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">buyquantity2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">Selldisplaytext</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">lineplot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">X3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;X3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">buyquantity3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">Selldisplaytext</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">lineplot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">S1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;S1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shortquantity1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">Shortdisplaytext</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">lineplot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">S2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;S2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shortquantity2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">Shortdisplaytext</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">lineplot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">S3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;S3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shortquantity3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">Shortdisplaytext</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">lineplot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">C1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;C1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shortquantity1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">Coverdisplaytext</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">lineplot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">C2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;C2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shortquantity2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">Coverdisplaytext</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">lineplot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">C3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;C3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shortquantity3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">Coverdisplaytext</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">EnableAlgo </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Disable&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lasttime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">StrFormat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;%0.f&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">SetChartBkColor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">colorDarkGrey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> ExitTradeTime AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;SquareOff&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExitOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELL&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;SquareOffIndex&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;SquareOff&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Squareoff Alert Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">BuyMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">B1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> StartTradeTime AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> EndTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">placeorder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;BUY&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">buyquantity1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B1index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Buy Above B1 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">BuyMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">B1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">L</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> StartTradeTime AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> EndTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">placeorder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;BUY&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">buyquantity1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B1index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Buy Below B1 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">BuyMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">B2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B2&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> StartTradeTime AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> EndTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">placeorder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;BUY&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">buyquantity2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B2index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Buy Above B2 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">BuyMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">B2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">L</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B2&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> StartTradeTime AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> EndTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">placeorder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;BUY&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">buyquantity2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B2index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Buy Below B2 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">BuyMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">B3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B3&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> StartTradeTime AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> EndTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">placeorder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;BUY&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">buyquantity3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B3index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Buy Above B3 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">BuyMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">B3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">L</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B3&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> StartTradeTime AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> EndTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">placeorder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;BUY&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">buyquantity3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B3index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Buy Below B3 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SellMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">X1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;X1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> StartTradeTime AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> EndTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;CURRENT&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the Current Order Quantity </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">placeorder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELL&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">buyquantity1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ALLOPENPOSITIONS&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the All Open Positions </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExitOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELL&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;X1index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;X1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Sell Above X1 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SellMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">X1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">L</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;X1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> StartTradeTime AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> EndTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;CURRENT&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the Current Order Quantity </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">placeorder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELL&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">buyquantity1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ALLOPENPOSITIONS&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the All Open Positions </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExitOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELL&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;X1index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;X1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Sell Below X1 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SellMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">X2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;X2&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> StartTradeTime AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> EndTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;CURRENT&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the Current Order Quantity </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">placeorder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELL&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">buyquantity2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ALLOPENPOSITIONS&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the All Open Positions </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExitOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELL&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;X2index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;X2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Sell Above X2 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SellMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">X2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">L</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;X2&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> ExitTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;CURRENT&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the Current Order Quantity </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">placeorder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELL&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">buyquantity2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ALLOPENPOSITIONS&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the All Open Positions </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExitOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELL&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;X2index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;X2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Sell Below X2 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SellMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">X3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;X3&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> StartTradeTime AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> EndTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;CURRENT&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the Current Order Quantity </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">placeorder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELL&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">buyquantity3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ALLOPENPOSITIONS&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the All Open Positions </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExitOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELL&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;X3index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;X3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Sell Above X3 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SellMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">X3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">L</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;X3&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> StartTradeTime AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> EndTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;CURRENT&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the Current Order Quantity </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">placeorder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELL&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">buyquantity3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ALLOPENPOSITIONS&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the All Open Positions </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExitOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELL&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;X3index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;X3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Sell Below X3 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ShortMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">S1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> StartTradeTime AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> EndTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">placeorder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELL&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shortquantity1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S1index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Short Above S1 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ShortMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">S1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">L</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> StartTradeTime AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> EndTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">placeorder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELL&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shortquantity1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S1index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Short Below S1 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ShortMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">S2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S2&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> StartTradeTime AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> EndTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">placeorder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELL&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shortquantity2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S2index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Short Above S2 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ShortMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">S2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">L</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S2&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> StartTradeTime AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> EndTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">placeorder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELL&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shortquantity2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S2index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Short Below S2 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ShortMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">S3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S3&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> StartTradeTime AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> EndTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">placeorder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELL&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shortquantity3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S3index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Short Above S3 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ShortMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">S3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">L</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S3&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> StartTradeTime AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> EndTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">placeorder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELL&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shortquantity3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S3index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Short Below S3 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CoverMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">C1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;C1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> StartTradeTime AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> EndTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;CURRENT&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the Current Order Quantity </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">PlaceOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;BUY&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shortquantity1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ALLOPENPOSITIONS&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the All Open Positions </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExitOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;BUY&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;C1index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;C1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Cover Above C1 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CoverMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">C1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">L</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;C1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> StartTradeTime AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> EndTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;CURRENT&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the Current Order Quantity </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">PlaceOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;BUY&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shortquantity1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ALLOPENPOSITIONS&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the All Open Positions </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExitOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;BUY&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;C1index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;C1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Cover Below C1 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CoverMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">C2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;C2&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> StartTradeTime AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> EndTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;CURRENT&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the Current Order Quantity </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">PlaceOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;BUY&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shortquantity2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ALLOPENPOSITIONS&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the All Open Positions </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExitOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;BUY&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;C2index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;C2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Cover Above C2 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CoverMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">C2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">L</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;C2&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> StartTradeTime AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> EndTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;CURRENT&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the Current Order Quantity </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">PlaceOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;BUY&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shortquantity2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ALLOPENPOSITIONS&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the All Open Positions </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExitOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;BUY&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;C2index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;C2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Cover Below C2 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CoverMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">C3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;C3&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> StartTradeTime AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> EndTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;CURRENT&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the Current Order Quantity </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">PlaceOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;BUY&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shortquantity3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ALLOPENPOSITIONS&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the All Open Positions </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExitOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;BUY&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;C3index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;C3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Cover Above C3 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CoverMode</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">C3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">L</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">Nz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;C3&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token plain"> AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> StartTradeTime AND </span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TimeNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> EndTradeTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> OR IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;OFF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;CURRENT&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the Current Order Quantity </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">PlaceOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;BUY&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shortquantity3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ExitPos</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ALLOPENPOSITIONS&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//If positive open positions are there only then exit the All Open Positions </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openalgo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExitOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;BUY&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;C3index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">LastValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">StaticVarSet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;C3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_TRACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Cover Below C3 Triggered&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//Plot Signals and Arrows</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B1index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeSquare</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorGreen</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> L</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Offset</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B1index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeSquare</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorLime</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">L</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Offset</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B1index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeUpArrow</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorWhite</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">L</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Offset</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">45</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B2index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeSquare</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorGreen</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> L</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Offset</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B2index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeSquare</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorLime</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">L</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Offset</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B2index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeUpArrow</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorWhite</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">L</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Offset</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">45</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B3index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeSquare</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorGreen</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> L</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Offset</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B3index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeSquare</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorLime</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">L</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Offset</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;B3index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeUpArrow</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorWhite</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">L</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Offset</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">45</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S1index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeSquare</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorRed</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Offset</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S1index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeSquare</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorOrange</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Offset</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S1index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeDownArrow</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorWhite</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Offset</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">45</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S2index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeSquare</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorRed</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Offset</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S2index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeSquare</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorOrange</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Offset</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S2index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeDownArrow</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorWhite</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Offset</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">45</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S3index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeSquare</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorRed</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Offset</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S3index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeSquare</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorOrange</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Offset</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;S3index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeDownArrow</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">colorWhite</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Offset</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">45</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;X1index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  shapeStar</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> colorBrightGreen</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> High</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;X2index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  shapeStar</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> colorBrightGreen</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> High</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;X3index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  shapeStar</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> colorBrightGreen</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> High</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;C1index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  shapeStar</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> colorRed</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Low</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;C2index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  shapeStar</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> colorRed</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Low</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;C3index&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  shapeStar</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> colorRed</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Low</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntradayMode</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;ON&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">PlotShapes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">IIf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">BarIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">==</span><span class="token function" style="color:#d73a49">StaticVarGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">staticvar</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;SquareOffIndex&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  shapeStar</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">shapeNone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> colorYellow</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Low</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_SECTION_END</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="smart-order-exits"><strong>Smart Order Exits</strong><a href="#smart-order-exits" class="hash-link" aria-label="Direct link to smart-order-exits" title="Direct link to smart-order-exits">​</a></h3>
<p>•<strong>Smart Orders</strong> are enabled while exiting the position.</p>
<p>•If there are no open positions and if exit orders are triggered then those orders are <strong>smartly ignored</strong>.</p>
<p>•Provision to close only <strong>Current Quantity</strong> and <strong>All  Open Positions</strong> is provided so that traders can flexibly use their own exit methods</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="requirements"><strong>Requirements</strong><a href="#requirements" class="hash-link" aria-label="Direct link to requirements" title="Direct link to requirements">​</a></h3>
<p>●OpenAlgo Downloaded and Configured</p>
<p>●OpenAlgo Supported Broker</p>
<p>●Amibroker 6.0 or Higher</p>
<p>●Realtime Datafeed Subscription</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="type-of-entry-and-exits-amibroker-terms"><strong>Type of Entry and Exits (Amibroker Terms)</strong><a href="#type-of-entry-and-exits-amibroker-terms" class="hash-link" aria-label="Direct link to type-of-entry-and-exits-amibroker-terms" title="Direct link to type-of-entry-and-exits-amibroker-terms">​</a></h3>
<p>where the characters ‘B’. ‘X’, ‘S’, ‘C’ are used along with horizontal or trendline study names.</p>
<img src="/assets/images/image (43)-60ab625e363a55b9957afd041a137c36.png">
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="type-of-trendline-signals">Type of Trendline Signals<a href="#type-of-trendline-signals" class="hash-link" aria-label="Direct link to Type of Trendline Signals" title="Direct link to Type of Trendline Signals">​</a></h3>
<p>\</p>
<img src="/assets/images/image (44)-dfa9e867d969be8faa96a24bf84f073c.png">
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="type-of-entry-and-exit-trendlines">Type of Entry and Exit Trendlines<a href="#type-of-entry-and-exit-trendlines" class="hash-link" aria-label="Direct link to Type of Entry and Exit Trendlines" title="Direct link to Type of Entry and Exit Trendlines">​</a></h3>
<p>\</p>
<img src="/assets/images/image (45)-51e8a8cac0541e3591801da177386247.png">
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="drawing-trend-line-and-assigning-study-name">Drawing Trend Line and Assigning Study Name<a href="#drawing-trend-line-and-assigning-study-name" class="hash-link" aria-label="Direct link to Drawing Trend Line and Assigning Study Name" title="Direct link to Drawing Trend Line and Assigning Study Name">​</a></h3>
<p>\</p>
<img src="/assets/images/image (46)-c75383b49f1d5f2316ee3d2ee78657f7.png">
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pyramiding-and-pyramiding-settings-with-targets">Pyramiding and Pyramiding Settings with Targets<a href="#pyramiding-and-pyramiding-settings-with-targets" class="hash-link" aria-label="Direct link to Pyramiding and Pyramiding Settings with Targets" title="Direct link to Pyramiding and Pyramiding Settings with Targets">​</a></h3>
<p>\</p>
<img src="/assets/images/image (47)-807ef5b8b64efa8f452e27a3b94c2f65.png">
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-multiple-entries-and-multiple-stops-using-line-automation-module">Creating Multiple Entries and Multiple Stops using Line Automation Module<a href="#creating-multiple-entries-and-multiple-stops-using-line-automation-module" class="hash-link" aria-label="Direct link to Creating Multiple Entries and Multiple Stops using Line Automation Module" title="Direct link to Creating Multiple Entries and Multiple Stops using Line Automation Module">​</a></h3>
<p>\</p>
<img src="/assets/images/image (48)-ca948bf6ee4005477c6c64eae42ccb09.png"></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/layrZero/layrZero.github.io/tree/main/docs/trading-platform/amibroker/line-trading-module.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/trading-platform/amibroker/equity-exploration-module"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Equity Exploration Module</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/trading-platform/amibroker/options-button-trading-module"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Options Button Trading Module</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-line-trading-automation-10" class="table-of-contents__link toc-highlight"><strong>What is Line Trading Automation 1.0?</strong></a></li><li><a href="#smart-order-exits" class="table-of-contents__link toc-highlight"><strong>Smart Order Exits</strong></a></li><li><a href="#requirements" class="table-of-contents__link toc-highlight"><strong>Requirements</strong></a></li><li><a href="#type-of-entry-and-exits-amibroker-terms" class="table-of-contents__link toc-highlight"><strong>Type of Entry and Exits (Amibroker Terms)</strong></a></li><li><a href="#type-of-trendline-signals" class="table-of-contents__link toc-highlight">Type of Trendline Signals</a></li><li><a href="#type-of-entry-and-exit-trendlines" class="table-of-contents__link toc-highlight">Type of Entry and Exit Trendlines</a></li><li><a href="#drawing-trend-line-and-assigning-study-name" class="table-of-contents__link toc-highlight">Drawing Trend Line and Assigning Study Name</a></li><li><a href="#pyramiding-and-pyramiding-settings-with-targets" class="table-of-contents__link toc-highlight">Pyramiding and Pyramiding Settings with Targets</a></li><li><a href="#creating-multiple-entries-and-multiple-stops-using-line-automation-module" class="table-of-contents__link toc-highlight">Creating Multiple Entries and Multiple Stops using Line Automation Module</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/why-to-build-with-Layr0">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://layr0.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Layr0 Org<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://community.layr0.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/Layr0org" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Radii Lab. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>